// Automatically generated by Interoptopus.

// Debug - write_imports 
#pragma warning disable 0105
using System;
using System.Text;
using System.Reflection;
using System.Linq.Expressions;
using System.Collections;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.Marshalling;
using System.Runtime.CompilerServices;
using My.Company;
using My.Company.Common;
#pragma warning restore 0105

// Debug - write_namespace_context 
namespace My.Company
{
    // Debug - write_class_context 
    public static partial class Interop
    {
        // Debug - write_native_lib_string 
        public const string NativeLib = "interoptopus_reference_project";

        // Debug - write_abi_guard 
        static Interop()
        {
            var api_version = Interop.pattern_api_guard();
            if (api_version != 14084398611944836443ul)
            {
                throw new TypeLoadException($"API reports hash {api_version} which differs from hash in bindings (14084398611944836443). You probably forgot to update / copy either the bindings or the library.");
            }
        }

        // Debug - write_constant 
        public const byte U8 = (byte) 255;

        // Debug - write_constant 
        public const float F32_MIN_POSITIVE = (float) 0.000000000000000000000000000000000000011754944;

        // Debug - write_constant 
        public const int COMPUTED_I32 = (int) -2147483647;


        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_void")]
        // Debug - write_function_declaration 
        public static partial void primitive_void();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_void2")]
        // Debug - write_function_declaration 
        public static partial void primitive_void2();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_bool")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool primitive_bool([MarshalAs(UnmanagedType.U1)] bool x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_u8")]
        // Debug - write_function_declaration 
        public static partial byte primitive_u8(byte x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_u16")]
        // Debug - write_function_declaration 
        public static partial ushort primitive_u16(ushort x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_u32")]
        // Debug - write_function_declaration 
        public static partial uint primitive_u32(uint x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_u64")]
        // Debug - write_function_declaration 
        public static partial ulong primitive_u64(ulong x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_i8")]
        // Debug - write_function_declaration 
        public static partial sbyte primitive_i8(sbyte x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_i16")]
        // Debug - write_function_declaration 
        public static partial short primitive_i16(short x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_i32")]
        // Debug - write_function_declaration 
        public static partial int primitive_i32(int x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "primitive_i64")]
        // Debug - write_function_declaration 
        public static partial long primitive_i64(long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "packed_to_packed1")]
        // Debug - write_function_declaration 
        public static partial Packed2 packed_to_packed1(Packed1 a);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "many_args_5")]
        // Debug - write_function_declaration 
        public static partial long many_args_5(long x0, long x1, long x2, long x3, long x4);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "many_args_10")]
        // Debug - write_function_declaration 
        public static partial long many_args_10(long x0, long x1, long x2, long x3, long x4, long x5, long x6, long x7, long x8, long x9);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ptr")]
        // Debug - write_function_declaration 
        public static partial IntPtr ptr(ref long x);

        // Debug - write_function 
        /// # Safety
        ///
        /// Parameter x must point to valid data.
        [LibraryImport(NativeLib, EntryPoint = "ptr_mut")]
        // Debug - write_function_declaration 
        public static partial IntPtr ptr_mut(out long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ptr_ptr")]
        // Debug - write_function_declaration 
        public static partial IntPtr ptr_ptr(ref IntPtr x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ref_simple")]
        // Debug - write_function_declaration 
        public static partial IntPtr ref_simple(ref long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ref_mut_simple")]
        // Debug - write_function_declaration 
        public static partial IntPtr ref_mut_simple(out long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ref_option")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool ref_option(ref long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ref_mut_option")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool ref_mut_option(out long x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "call_tupled")]
        // Debug - write_function_declaration 
        public static partial Tupled call_tupled(Tupled x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "complex_args_1")]
        // Debug - write_function_declaration 
        public static partial FFIError complex_args_1(Vec3f32 a, ref Tupled b);

        public static unsafe void complex_args_1_checked(Vec3f32 a, ref Tupled b)
        {
            var rval = complex_args_1(a, ref b);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "callback")]
        // Debug - write_function_declaration 
        public static partial byte callback(InteropDelegate_fn_u8_rval_u8 callback, byte value);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "callback_marshalled")]
        // Debug - write_function_declaration 
        private static partial void callback_marshalled(InteropDelegate_fn_CharArray_native callback, CharArray value);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_1a")]
        // Debug - write_function_declaration 
        public static partial uint generic_1a(Genericu32 x, Phantomu8 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_1b")]
        // Debug - write_function_declaration 
        public static partial byte generic_1b(Genericu8 x, Phantomu8 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_1c")]
        // Debug - write_function_declaration 
        public static partial byte generic_1c(ref Genericu8 x, ref Genericu8 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_2")]
        // Debug - write_function_declaration 
        public static partial byte generic_2(IntPtr x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_3")]
        // Debug - write_function_declaration 
        public static partial byte generic_3(IntPtr x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "generic_4")]
        // Debug - write_function_declaration 
        public static partial byte generic_4(IntPtr x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "array_1")]
        // Debug - write_function_declaration 
        public static partial byte array_1(Array x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "array_2")]
        // Debug - write_function_declaration 
        public static partial Array array_2();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "array_3")]
        // Debug - write_function_declaration 
        public static partial void array_3(out Array arr);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "nested_array_1")]
        // Debug - write_function_declaration 
        public static partial NestedArray nested_array_1();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "nested_array_2")]
        // Debug - write_function_declaration 
        public static partial void nested_array_2(out NestedArray result);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "nested_array_3")]
        // Debug - write_function_declaration 
        public static partial byte nested_array_3(NestedArray input);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "char_array_1")]
        // Debug - write_function_declaration 
        public static partial CharArray char_array_1();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "char_array_2")]
        // Debug - write_function_declaration 
        public static partial CharArray char_array_2(CharArray arr);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "char_array_3")]
        // Debug - write_function_declaration 
        public static partial byte char_array_3(ref CharArray arr);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "bool_field")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool bool_field(BoolField x);

        // Debug - write_function 
        /// This function has documentation.
        [LibraryImport(NativeLib, EntryPoint = "documented")]
        // Debug - write_function_declaration 
        public static partial EnumDocumented documented(StructDocumented x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ambiguous_1")]
        // Debug - write_function_declaration 
        public static partial Vec1 ambiguous_1(Vec1 x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ambiguous_2")]
        // Debug - write_function_declaration 
        public static partial Vec2 ambiguous_2(Vec2 x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "ambiguous_3")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool ambiguous_3(Vec1 x, Vec2 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "namespaced_type")]
        // Debug - write_function_declaration 
        public static partial Vec namespaced_type(Vec x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "namespaced_inner_option")]
        // Debug - write_function_declaration 
        public static partial OptionVec namespaced_inner_option(OptionVec x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "namespaced_inner_slice")]
        // Debug - write_function_declaration 
        public static partial Slice<Vec> namespaced_inner_slice(Slice<Vec> x);

        public static unsafe Slice<Vec> namespaced_inner_slice(ReadOnlySpan<Vec> x)
        {
            fixed (void* ptr_x = x)
            {
                var x_slice = new Slice<Vec>(new IntPtr(ptr_x), (ulong) x.Length);
                return namespaced_inner_slice(x_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "namespaced_inner_slice_mut")]
        // Debug - write_function_declaration 
        public static partial SliceMut<Vec> namespaced_inner_slice_mut(SliceMut<Vec> x);

        public static unsafe SliceMut<Vec> namespaced_inner_slice_mut(Span<Vec> x)
        {
            fixed (void* ptr_x = x)
            {
                var x_slice = new SliceMut<Vec>(new IntPtr(ptr_x), (ulong) x.Length);
                return namespaced_inner_slice_mut(x_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "panics")]
        // Debug - write_function_declaration 
        public static partial FFIError panics();

        public static unsafe void panics_checked()
        {
            var rval = panics();;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "renamed")]
        // Debug - write_function_declaration 
        public static partial EnumRenamed renamed(StructRenamed x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "sleep")]
        // Debug - write_function_declaration 
        public static partial void sleep(ulong millis);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "weird_1")]
        [return: MarshalAs(UnmanagedType.U1)]
        // Debug - write_function_declaration 
        public static partial bool weird_1(Weird1u32 x, Weird2u8 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "visibility")]
        // Debug - write_function_declaration 
        public static partial void visibility(Visibility1 x, Visibility2 y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "repr_transparent")]
        // Debug - write_function_declaration 
        public static partial Tupled repr_transparent(Tupled x, ref Tupled r);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_1")]
        // Debug - write_function_declaration 
        public static partial uint pattern_ascii_pointer_1([MarshalAs(UnmanagedType.LPStr)] string x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_2")]
        // Debug - write_function_declaration 
        public static partial IntPtr pattern_ascii_pointer_2();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_3")]
        // Debug - write_function_declaration 
        public static partial IntPtr pattern_ascii_pointer_3([MarshalAs(UnmanagedType.LPStr)] string x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_4")]
        // Debug - write_function_declaration 
        public static partial IntPtr pattern_ascii_pointer_4([MarshalAs(UnmanagedType.LPStr)] string x, uint l);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_5")]
        // Debug - write_function_declaration 
        public static partial byte pattern_ascii_pointer_5([MarshalAs(UnmanagedType.LPStr)] string x, uint i);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ascii_pointer_return_slice")]
        // Debug - write_function_declaration 
        public static partial Slice<UseAsciiStringPattern> pattern_ascii_pointer_return_slice();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_1")]
        // Debug - write_function_declaration 
        public static partial uint pattern_ffi_slice_1(Slice<uint> ffi_slice);

        public static unsafe uint pattern_ffi_slice_1(ReadOnlySpan<uint> ffi_slice)
        {
            fixed (void* ptr_ffi_slice = ffi_slice)
            {
                var ffi_slice_slice = new Slice<uint>(new IntPtr(ptr_ffi_slice), (ulong) ffi_slice.Length);
                return pattern_ffi_slice_1(ffi_slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_1b")]
        // Debug - write_function_declaration 
        public static partial uint pattern_ffi_slice_1b(SliceMut<uint> ffi_slice);

        public static unsafe uint pattern_ffi_slice_1b(Span<uint> ffi_slice)
        {
            fixed (void* ptr_ffi_slice = ffi_slice)
            {
                var ffi_slice_slice = new SliceMut<uint>(new IntPtr(ptr_ffi_slice), (ulong) ffi_slice.Length);
                return pattern_ffi_slice_1b(ffi_slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_2")]
        // Debug - write_function_declaration 
        public static partial Vec3f32 pattern_ffi_slice_2(Slice<Vec3f32> ffi_slice, int i);

        public static unsafe Vec3f32 pattern_ffi_slice_2(ReadOnlySpan<Vec3f32> ffi_slice, int i)
        {
            fixed (void* ptr_ffi_slice = ffi_slice)
            {
                var ffi_slice_slice = new Slice<Vec3f32>(new IntPtr(ptr_ffi_slice), (ulong) ffi_slice.Length);
                return pattern_ffi_slice_2(ffi_slice_slice, i);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_3")]
        // Debug - write_function_declaration 
        private static partial void pattern_ffi_slice_3(SliceMut<byte> slice, CallbackSliceMut callback);

        public static unsafe void pattern_ffi_slice_3(Span<byte> slice, CallbackSliceMut callback)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new SliceMut<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                pattern_ffi_slice_3(slice_slice, callback);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_4")]
        // Debug - write_function_declaration 
        public static partial void pattern_ffi_slice_4(Slice<byte> slice, SliceMut<byte> slice2);

        public static unsafe void pattern_ffi_slice_4(ReadOnlySpan<byte> slice, Span<byte> slice2)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                fixed (void* ptr_slice2 = slice2)
                {
                    var slice2_slice = new SliceMut<byte>(new IntPtr(ptr_slice2), (ulong) slice2.Length);
                    pattern_ffi_slice_4(slice_slice, slice2_slice);;
                }
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_5")]
        // Debug - write_function_declaration 
        public static partial void pattern_ffi_slice_5(ref Slice<byte> slice, ref SliceMut<byte> slice2);

        public static unsafe void pattern_ffi_slice_5(ReadOnlySpan<byte> slice, Span<byte> slice2)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                fixed (void* ptr_slice2 = slice2)
                {
                    var slice2_slice = new SliceMut<byte>(new IntPtr(ptr_slice2), (ulong) slice2.Length);
                    pattern_ffi_slice_5(ref slice_slice, ref slice2_slice);;
                }
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_6")]
        // Debug - write_function_declaration 
        public static partial void pattern_ffi_slice_6(ref SliceMut<byte> slice, CallbackU8 callback);

        public static unsafe void pattern_ffi_slice_6(Span<byte> slice, CallbackU8 callback)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new SliceMut<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                pattern_ffi_slice_6(ref slice_slice, callback);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_8")]
        // Debug - write_function_declaration 
        private static partial void pattern_ffi_slice_8(ref SliceMut<CharArray> slice, CallbackCharArray2 callback);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_delegate")]
        // Debug - write_function_declaration 
        private static partial byte pattern_ffi_slice_delegate(CallbackFFISlice callback);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_slice_delegate_huge")]
        // Debug - write_function_declaration 
        private static partial Vec3f32 pattern_ffi_slice_delegate_huge(CallbackHugeVecSlice callback);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_option_1")]
        // Debug - write_function_declaration 
        public static partial OptionInner pattern_ffi_option_1(OptionInner ffi_slice);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_option_2")]
        // Debug - write_function_declaration 
        public static partial Inner pattern_ffi_option_2(OptionInner ffi_slice);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_bool")]
        // Debug - write_function_declaration 
        public static partial Bool pattern_ffi_bool(Bool ffi_bool);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_cchar")]
        // Debug - write_function_declaration 
        public static partial sbyte pattern_ffi_cchar(sbyte ffi_cchar);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_cchar_const_pointer")]
        // Debug - write_function_declaration 
        public static partial IntPtr pattern_ffi_cchar_const_pointer(IntPtr ffi_cchar);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_ffi_cchar_mut_pointer")]
        // Debug - write_function_declaration 
        public static partial IntPtr pattern_ffi_cchar_mut_pointer(IntPtr ffi_cchar);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_api_guard")]
        // Debug - write_function_declaration 
        public static partial ulong pattern_api_guard();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_1")]
        // Debug - write_function_declaration 
        public static partial uint pattern_callback_1(MyCallback callback, uint x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_2")]
        // Debug - write_function_declaration 
        public static partial MyCallbackVoid pattern_callback_2(MyCallbackVoid callback);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_4")]
        // Debug - write_function_declaration 
        public static partial uint pattern_callback_4(MyCallbackNamespaced callback, uint x);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_5")]
        // Debug - write_function_declaration 
        public static partial SumDelegate1 pattern_callback_5();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_6")]
        // Debug - write_function_declaration 
        public static partial SumDelegate2 pattern_callback_6();

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_callback_7")]
        // Debug - write_function_declaration 
        public static partial FFIError pattern_callback_7(SumDelegateReturn c1, SumDelegateReturn2 c2, int x, int i, out int o);

        public static unsafe void pattern_callback_7_checked(SumDelegateReturn c1, SumDelegateReturn2 c2, int x, int i, out int o)
        {
            var c1_safe_delegate = new SumDelegateReturnExceptionSafe(c1);
            var rval = pattern_callback_7(c1_safe_delegate.Call, c2, x, i, out o);;
            c1_safe_delegate.Rethrow();
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "pattern_surrogates_1")]
        // Debug - write_function_declaration 
        public static partial void pattern_surrogates_1(Local s, out Container c);

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "basic_service_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError basic_service_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void basic_service_destroy_checked(ref IntPtr context)
        {
            var rval = basic_service_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "basic_service_new")]
        // Debug - write_function_declaration 
        public static partial FFIError basic_service_new(ref IntPtr context);

        public static unsafe void basic_service_new_checked(ref IntPtr context)
        {
            var rval = basic_service_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_on_panic_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_on_panic_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_on_panic_destroy_checked(ref IntPtr context)
        {
            var rval = service_on_panic_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_on_panic_new")]
        // Debug - write_function_declaration 
        public static partial FFIError service_on_panic_new(ref IntPtr context);

        public static unsafe void service_on_panic_new_checked(ref IntPtr context)
        {
            var rval = service_on_panic_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Methods returning a Result<(), _> are the default and do not
        /// need annotations.
        [LibraryImport(NativeLib, EntryPoint = "service_on_panic_return_result")]
        // Debug - write_function_declaration 
        public static partial FFIError service_on_panic_return_result(IntPtr context, uint anon1);

        /// Methods returning a Result<(), _> are the default and do not
        /// need annotations.
        public static unsafe void service_on_panic_return_result_checked(IntPtr context, uint anon1)
        {
            var rval = service_on_panic_return_result(context, anon1);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Methods returning a value need an `on_panic` annotation.
        [LibraryImport(NativeLib, EntryPoint = "service_on_panic_return_default_value")]
        // Debug - write_function_declaration 
        public static partial uint service_on_panic_return_default_value(IntPtr context, uint x);

        // Debug - write_function 
        /// This function has no panic safeguards. It will be a bit faster to
        /// call, but if it panics your host app will be in an undefined state.
        [LibraryImport(NativeLib, EntryPoint = "service_on_panic_return_ub_on_panic")]
        // Debug - write_function_declaration 
        public static partial IntPtr service_on_panic_return_ub_on_panic(IntPtr context);

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_callbacks_destroy_checked(ref IntPtr context)
        {
            var rval = service_callbacks_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_new")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_new(ref IntPtr context);

        public static unsafe void service_callbacks_new_checked(ref IntPtr context)
        {
            var rval = service_callbacks_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_callback_simple")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_callback_simple(IntPtr context, MyCallback callback);

        public static unsafe void service_callbacks_callback_simple_checked(IntPtr context, MyCallback callback)
        {
            var rval = service_callbacks_callback_simple(context, callback);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_callback_ffi_return")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_callback_ffi_return(IntPtr context, SumDelegateReturn callback);

        public static unsafe void service_callbacks_callback_ffi_return_checked(IntPtr context, SumDelegateReturn callback)
        {
            var callback_safe_delegate = new SumDelegateReturnExceptionSafe(callback);
            var rval = service_callbacks_callback_ffi_return(context, callback_safe_delegate.Call);;
            callback_safe_delegate.Rethrow();
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_callback_with_slice")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_callback_with_slice(IntPtr context, SumDelegateReturn callback, Slice<int> input);

        public static unsafe void service_callbacks_callback_with_slice(IntPtr context, SumDelegateReturn callback, ReadOnlySpan<int> input)
        {
            var callback_safe_delegate = new SumDelegateReturnExceptionSafe(callback);
            fixed (void* ptr_input = input)
            {
                var input_slice = new Slice<int>(new IntPtr(ptr_input), (ulong) input.Length);
                var rval = service_callbacks_callback_with_slice(context, callback_safe_delegate.Call, input_slice);;
                callback_safe_delegate.Rethrow();
                if (rval != FFIError.Ok)
                {
                    throw new InteropException<FFIError>(rval);
                }
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_callbacks_invoke_delegates")]
        // Debug - write_function_declaration 
        public static partial FFIError service_callbacks_invoke_delegates(IntPtr context);

        public static unsafe void service_callbacks_invoke_delegates_checked(IntPtr context)
        {
            var rval = service_callbacks_invoke_delegates(context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_ignoring_methods_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_ignoring_methods_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_ignoring_methods_destroy_checked(ref IntPtr context)
        {
            var rval = service_ignoring_methods_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_ignoring_methods_new")]
        // Debug - write_function_declaration 
        public static partial FFIError service_ignoring_methods_new(ref IntPtr context);

        public static unsafe void service_ignoring_methods_new_checked(ref IntPtr context)
        {
            var rval = service_ignoring_methods_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_multiple_ctors_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_multiple_ctors_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_multiple_ctors_destroy_checked(ref IntPtr context)
        {
            var rval = service_multiple_ctors_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_multiple_ctors_new_with")]
        // Debug - write_function_declaration 
        public static partial FFIError service_multiple_ctors_new_with(ref IntPtr context, uint some_value);

        public static unsafe void service_multiple_ctors_new_with_checked(ref IntPtr context, uint some_value)
        {
            var rval = service_multiple_ctors_new_with(ref context, some_value);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_multiple_ctors_new_without")]
        // Debug - write_function_declaration 
        public static partial FFIError service_multiple_ctors_new_without(ref IntPtr context);

        public static unsafe void service_multiple_ctors_new_without_checked(ref IntPtr context)
        {
            var rval = service_multiple_ctors_new_without(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_multiple_ctors_new_with_string")]
        // Debug - write_function_declaration 
        public static partial FFIError service_multiple_ctors_new_with_string(ref IntPtr context, [MarshalAs(UnmanagedType.LPStr)] string anon0);

        public static unsafe void service_multiple_ctors_new_with_string_checked(ref IntPtr context, [MarshalAs(UnmanagedType.LPStr)] string anon0)
        {
            var rval = service_multiple_ctors_new_with_string(ref context, anon0);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_multiple_ctors_new_failing")]
        // Debug - write_function_declaration 
        public static partial FFIError service_multiple_ctors_new_failing(ref IntPtr context, byte some_value);

        public static unsafe void service_multiple_ctors_new_failing_checked(ref IntPtr context, byte some_value)
        {
            var rval = service_multiple_ctors_new_failing(ref context, some_value);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_using_lifetimes_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_using_lifetimes_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_using_lifetimes_destroy_checked(ref IntPtr context)
        {
            var rval = service_using_lifetimes_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_using_lifetimes_new_with")]
        // Debug - write_function_declaration 
        public static partial FFIError service_using_lifetimes_new_with(ref IntPtr context, ref uint some_value);

        public static unsafe void service_using_lifetimes_new_with_checked(ref IntPtr context, ref uint some_value)
        {
            var rval = service_using_lifetimes_new_with(ref context, ref some_value);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_using_lifetimes_lifetime_1")]
        // Debug - write_function_declaration 
        public static partial void service_using_lifetimes_lifetime_1(IntPtr context, Slice<Bool> slice);

        public static unsafe void service_using_lifetimes_lifetime_1(IntPtr context, ReadOnlySpan<Bool> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<Bool>(new IntPtr(ptr_slice), (ulong) slice.Length);
                service_using_lifetimes_lifetime_1(context, slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_using_lifetimes_lifetime_2")]
        // Debug - write_function_declaration 
        public static partial void service_using_lifetimes_lifetime_2(IntPtr context, Slice<Bool> slice);

        public static unsafe void service_using_lifetimes_lifetime_2(IntPtr context, ReadOnlySpan<Bool> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<Bool>(new IntPtr(ptr_slice), (ulong) slice.Length);
                service_using_lifetimes_lifetime_2(context, slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_using_lifetimes_return_string_accept_slice")]
        // Debug - write_function_declaration 
        public static partial IntPtr service_using_lifetimes_return_string_accept_slice(IntPtr anon0, Slice<byte> anon1);

        public static unsafe string service_using_lifetimes_return_string_accept_slice(IntPtr anon0, ReadOnlySpan<byte> anon1)
        {
            fixed (void* ptr_anon1 = anon1)
            {
                var anon1_slice = new Slice<byte>(new IntPtr(ptr_anon1), (ulong) anon1.Length);
                var s = service_using_lifetimes_return_string_accept_slice(anon0, anon1_slice);;
                return Marshal.PtrToStringAnsi(s);
            }
        }

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_various_slices_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_various_slices_destroy_checked(ref IntPtr context)
        {
            var rval = service_various_slices_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_new")]
        // Debug - write_function_declaration 
        public static partial FFIError service_various_slices_new(ref IntPtr context);

        public static unsafe void service_various_slices_new_checked(ref IntPtr context)
        {
            var rval = service_various_slices_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self")]
        // Debug - write_function_declaration 
        public static partial byte service_various_slices_mut_self(IntPtr context, Slice<byte> slice);

        public static unsafe byte service_various_slices_mut_self(IntPtr context, ReadOnlySpan<byte> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                return service_various_slices_mut_self(context, slice_slice);;
            }
        }

        // Debug - write_function 
        /// Single line.
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_void")]
        // Debug - write_function_declaration 
        public static partial void service_various_slices_mut_self_void(IntPtr context, Slice<Bool> slice);

        /// Single line.
        public static unsafe void service_various_slices_mut_self_void(IntPtr context, ReadOnlySpan<Bool> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<Bool>(new IntPtr(ptr_slice), (ulong) slice.Length);
                service_various_slices_mut_self_void(context, slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_ref")]
        // Debug - write_function_declaration 
        public static partial byte service_various_slices_mut_self_ref(IntPtr context, ref byte x, out byte y);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_ref_slice")]
        // Debug - write_function_declaration 
        public static partial byte service_various_slices_mut_self_ref_slice(IntPtr context, ref byte x, out byte y, Slice<byte> slice);

        public static unsafe byte service_various_slices_mut_self_ref_slice(IntPtr context, ref byte x, out byte y, ReadOnlySpan<byte> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                return service_various_slices_mut_self_ref_slice(context, ref x, out y, slice_slice);;
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_ref_slice_limited")]
        // Debug - write_function_declaration 
        public static partial byte service_various_slices_mut_self_ref_slice_limited(IntPtr context, ref byte x, out byte y, Slice<byte> slice, Slice<byte> slice2);

        public static unsafe byte service_various_slices_mut_self_ref_slice_limited(IntPtr context, ref byte x, out byte y, ReadOnlySpan<byte> slice, ReadOnlySpan<byte> slice2)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new Slice<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                fixed (void* ptr_slice2 = slice2)
                {
                    var slice2_slice = new Slice<byte>(new IntPtr(ptr_slice2), (ulong) slice2.Length);
                    return service_various_slices_mut_self_ref_slice_limited(context, ref x, out y, slice_slice, slice2_slice);;
                }
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_ffi_error")]
        // Debug - write_function_declaration 
        public static partial FFIError service_various_slices_mut_self_ffi_error(IntPtr context, SliceMut<byte> slice);

        public static unsafe void service_various_slices_mut_self_ffi_error(IntPtr context, Span<byte> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new SliceMut<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                var rval = service_various_slices_mut_self_ffi_error(context, slice_slice);;
                if (rval != FFIError.Ok)
                {
                    throw new InteropException<FFIError>(rval);
                }
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_mut_self_no_error")]
        // Debug - write_function_declaration 
        public static partial FFIError service_various_slices_mut_self_no_error(IntPtr context, SliceMut<byte> slice);

        public static unsafe void service_various_slices_mut_self_no_error(IntPtr context, Span<byte> slice)
        {
            fixed (void* ptr_slice = slice)
            {
                var slice_slice = new SliceMut<byte>(new IntPtr(ptr_slice), (ulong) slice.Length);
                var rval = service_various_slices_mut_self_no_error(context, slice_slice);;
                if (rval != FFIError.Ok)
                {
                    throw new InteropException<FFIError>(rval);
                }
            }
        }

        // Debug - write_function 
        /// Warning, you _must_ discard the returned slice object before calling into this service
        /// again, as otherwise undefined behavior might happen.
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_return_slice")]
        // Debug - write_function_declaration 
        public static partial Slice<uint> service_various_slices_return_slice(IntPtr context);

        // Debug - write_function 
        /// Warning, you _must_ discard the returned slice object before calling into this service
        /// again, as otherwise undefined behavior might happen.
        [LibraryImport(NativeLib, EntryPoint = "service_various_slices_return_slice_mut")]
        // Debug - write_function_declaration 
        public static partial SliceMut<uint> service_various_slices_return_slice_mut(IntPtr context);

        // Debug - write_function 
        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        [LibraryImport(NativeLib, EntryPoint = "service_strings_destroy")]
        // Debug - write_function_declaration 
        public static partial FFIError service_strings_destroy(ref IntPtr context);

        /// Destroys the given instance.
        ///
        /// # Safety
        ///
        /// The passed parameter MUST have been created with the corresponding init function;
        /// passing any other value results in undefined behavior.
        public static unsafe void service_strings_destroy_checked(ref IntPtr context)
        {
            var rval = service_strings_destroy(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_strings_new")]
        // Debug - write_function_declaration 
        public static partial FFIError service_strings_new(ref IntPtr context);

        public static unsafe void service_strings_new_checked(ref IntPtr context)
        {
            var rval = service_strings_new(ref context);;
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_strings_pass_string")]
        // Debug - write_function_declaration 
        public static partial void service_strings_pass_string(IntPtr context, [MarshalAs(UnmanagedType.LPStr)] string anon1);

        // Debug - write_function 
        [LibraryImport(NativeLib, EntryPoint = "service_strings_return_string")]
        // Debug - write_function_declaration 
        public static partial IntPtr service_strings_return_string(IntPtr context);

    }

    // Debug - write_type_definition_enum 
    /// Documented enum.
    public enum EnumDocumented
    {
        /// Variant A.
        A = 0,
        /// Variant B.
        B = 1,
        /// Variant B.
        C = 2,
    }

    // Debug - write_type_definition_enum 
    public enum EnumRenamed
    {
        X = 0,
    }

    // Debug - write_type_definition_composite 
    [Serializable]
    [NativeMarshalling(typeof(ArrayMarshaller))]
    public partial struct Array
    {
        public byte[] data;
    }
    // Debug - write_type_marshaller 

    [CustomMarshaller(typeof(Array), MarshalMode.Default, typeof(ArrayMarshaller))]
    internal static class ArrayMarshaller
    {
        [StructLayout(LayoutKind.Sequential)]
        public unsafe struct Unmanaged
        {
            public fixed byte data[16];
        }

        public static Unmanaged ConvertToUnmanaged(Array managed)
        {
            var result = new Unmanaged
            {
            };

            unsafe
            {
                if(managed.data != null)
                {
                    if(managed.data.Length != 16)
                    {
                        throw new InvalidOperationException($"The managed array field '{nameof(Array.data)}' has {managed.data.Length} elements, exceeding the fixed size array of 16.");
                    }
                    var source_data = new ReadOnlySpan<byte>(managed.data, 0, managed.data.Length);
                    var dest = new Span<byte>(result.data, 16);
                    source_data.CopyTo(dest);
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }
            }

            return result;
        }

        public static Array ConvertToManaged(Unmanaged unmanaged)
        {
            var result = new Array()
            {
            };

            unsafe
            {
                var source_data = new Span<byte>(unmanaged.data, 16);
                var arr_data = new byte[16];
                source_data.CopyTo(arr_data.AsSpan());
                result.data = arr_data;
            }

            return result;
        }
    }


    // Debug - write_type_definition_composite 
    [Serializable]
    [NativeMarshalling(typeof(BoolFieldMarshaller))]
    public partial struct BoolField
    {
        public bool val;
    }
    // Debug - write_type_marshaller 

    [CustomMarshaller(typeof(BoolField), MarshalMode.Default, typeof(BoolFieldMarshaller))]
    internal static class BoolFieldMarshaller
    {
        [StructLayout(LayoutKind.Sequential)]
        public unsafe struct Unmanaged
        {
            public sbyte val;
        }

        public static Unmanaged ConvertToUnmanaged(BoolField managed)
        {
            var result = new Unmanaged
            {
                val = Convert.ToSByte(managed.val),
            };

            unsafe
            {
            }

            return result;
        }

        public static BoolField ConvertToManaged(Unmanaged unmanaged)
        {
            var result = new BoolField()
            {
                val = Convert.ToBoolean(unmanaged.val),
            };

            unsafe
            {
            }

            return result;
        }
    }


    // Debug - write_type_definition_composite 
    [Serializable]
    [NativeMarshalling(typeof(CharArrayMarshaller))]
    public partial struct CharArray
    {
        public string str;
        public string str_2;
    }
    // Debug - write_type_marshaller 

    [CustomMarshaller(typeof(CharArray), MarshalMode.Default, typeof(CharArrayMarshaller))]
    internal static class CharArrayMarshaller
    {
        [StructLayout(LayoutKind.Sequential)]
        public unsafe struct Unmanaged
        {
            public fixed byte str[32];
            public fixed byte str_2[32];
        }

        public static Unmanaged ConvertToUnmanaged(CharArray managed)
        {
            var result = new Unmanaged
            {
            };

            unsafe
            {
                if(managed.str != null)
                {
                    fixed(char* s = managed.str)
                    {
                        if(Encoding.UTF8.GetByteCount(managed.str, 0, managed.str.Length) + 1 > 32)
                        {
                            throw new InvalidOperationException($"The managed string field '{nameof(CharArray.str)}' cannot be encoded to fit the fixed size array of 32.");
                        }
                        var written = Encoding.UTF8.GetBytes(s, managed.str.Length, result.str, 31);
                        result.str[written] = 0;
                    }
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }

                if(managed.str_2 != null)
                {
                    fixed(char* s = managed.str_2)
                    {
                        if(Encoding.UTF8.GetByteCount(managed.str_2, 0, managed.str_2.Length) + 1 > 32)
                        {
                            throw new InvalidOperationException($"The managed string field '{nameof(CharArray.str_2)}' cannot be encoded to fit the fixed size array of 32.");
                        }
                        var written = Encoding.UTF8.GetBytes(s, managed.str_2.Length, result.str_2, 31);
                        result.str_2[written] = 0;
                    }
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }
            }

            return result;
        }

        public static CharArray ConvertToManaged(Unmanaged unmanaged)
        {
            var result = new CharArray()
            {
            };

            unsafe
            {
                var source_str = new ReadOnlySpan<byte>(unmanaged.str, 32);
                var terminatorIndex_str = source_str.IndexOf<byte>(0);
                result.str = Encoding.UTF8.GetString(source_str.Slice(0, terminatorIndex_str == -1 ? Math.Min(source_str.Length, 32) : terminatorIndex_str));

                var source_str_2 = new ReadOnlySpan<byte>(unmanaged.str_2, 32);
                var terminatorIndex_str_2 = source_str_2.IndexOf<byte>(0);
                result.str_2 = Encoding.UTF8.GetString(source_str_2.Slice(0, terminatorIndex_str_2 == -1 ? Math.Min(source_str_2.Length, 32) : terminatorIndex_str_2));
            }

            return result;
        }
    }


    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Container
    {
        public Local foreign;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct ExtraTypef32
    {
        public float x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Genericu32
    {
        public IntPtr x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Genericu8
    {
        public IntPtr x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Inner
    {
        float x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Local
    {
        uint x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [NativeMarshalling(typeof(NestedArrayMarshaller))]
    public partial struct NestedArray
    {
        public EnumRenamed field_enum;
        public Vec3f32 field_vec;
        public bool field_bool;
        public int field_int;
        public ushort[] field_array;
        public ushort[] field_array_2;
        public Array field_struct;
    }
    // Debug - write_type_marshaller 

    [CustomMarshaller(typeof(NestedArray), MarshalMode.Default, typeof(NestedArrayMarshaller))]
    internal static class NestedArrayMarshaller
    {
        [StructLayout(LayoutKind.Sequential)]
        public unsafe struct Unmanaged
        {
            public EnumRenamed field_enum;
            public Vec3f32 field_vec;
            public sbyte field_bool;
            public int field_int;
            public fixed ushort field_array[5];
            public fixed ushort field_array_2[5];
            public ArrayMarshaller.Unmanaged field_struct;
        }

        public static Unmanaged ConvertToUnmanaged(NestedArray managed)
        {
            var result = new Unmanaged
            {
                field_enum = managed.field_enum,
                field_vec = managed.field_vec,
                field_bool = Convert.ToSByte(managed.field_bool),
                field_int = managed.field_int,
                field_struct = ArrayMarshaller.ConvertToUnmanaged(managed.field_struct),
            };

            unsafe
            {
                if(managed.field_array != null)
                {
                    if(managed.field_array.Length != 5)
                    {
                        throw new InvalidOperationException($"The managed array field '{nameof(NestedArray.field_array)}' has {managed.field_array.Length} elements, exceeding the fixed size array of 5.");
                    }
                    var source_field_array = new ReadOnlySpan<ushort>(managed.field_array, 0, managed.field_array.Length);
                    var dest = new Span<ushort>(result.field_array, 5);
                    source_field_array.CopyTo(dest);
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }

                if(managed.field_array_2 != null)
                {
                    if(managed.field_array_2.Length != 5)
                    {
                        throw new InvalidOperationException($"The managed array field '{nameof(NestedArray.field_array_2)}' has {managed.field_array_2.Length} elements, exceeding the fixed size array of 5.");
                    }
                    var source_field_array_2 = new ReadOnlySpan<ushort>(managed.field_array_2, 0, managed.field_array_2.Length);
                    var dest = new Span<ushort>(result.field_array_2, 5);
                    source_field_array_2.CopyTo(dest);
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }
            }

            return result;
        }

        public static NestedArray ConvertToManaged(Unmanaged unmanaged)
        {
            var result = new NestedArray()
            {
                field_enum = unmanaged.field_enum,
                field_vec = unmanaged.field_vec,
                field_bool = Convert.ToBoolean(unmanaged.field_bool),
                field_int = unmanaged.field_int,
                field_struct = ArrayMarshaller.ConvertToManaged(unmanaged.field_struct),
            };

            unsafe
            {
                var source_field_array = new Span<ushort>(unmanaged.field_array, 5);
                var arr_field_array = new ushort[5];
                source_field_array.CopyTo(arr_field_array.AsSpan());
                result.field_array = arr_field_array;

                var source_field_array_2 = new Span<ushort>(unmanaged.field_array_2, 5);
                var arr_field_array_2 = new ushort[5];
                source_field_array_2.CopyTo(arr_field_array_2.AsSpan());
                result.field_array_2 = arr_field_array_2;
            }

            return result;
        }
    }


    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public partial struct Packed1
    {
        public byte x;
        public ushort y;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public partial struct Packed2
    {
        public ushort y;
        public byte x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Phantomu8
    {
        public uint x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    /// Documented struct.
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct StructDocumented
    {
        /// Documented field.
        public float x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct StructRenamed
    {
        public EnumRenamed e;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Tupled
    {
        public byte x0;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct UseAsciiStringPattern
    {
        public string ascii_string;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Vec1
    {
        public float x;
        public float y;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Vec2
    {
        public double x;
        public double z;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Vec3f32
    {
        public float x;
        public float y;
        public float z;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Visibility1
    {
        public byte pblc;
        byte prvt;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Visibility2
    {
        public byte pblc1;
        public byte pblc2;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct Weird1u32
    {
        uint x;
    }
    // Debug - write_type_marshaller 

    // Debug - write_type_definition_composite 
    [Serializable]
    [NativeMarshalling(typeof(Weird2u8Marshaller))]
    public partial struct Weird2u8
    {
        internal byte t;
        internal byte[] a;
        internal IntPtr r;
    }
    // Debug - write_type_marshaller 

    [CustomMarshaller(typeof(Weird2u8), MarshalMode.Default, typeof(Weird2u8Marshaller))]
    internal static class Weird2u8Marshaller
    {
        [StructLayout(LayoutKind.Sequential)]
        public unsafe struct Unmanaged
        {
            public byte t;
            public fixed byte a[5];
            public IntPtr r;
        }

        public static Unmanaged ConvertToUnmanaged(Weird2u8 managed)
        {
            var result = new Unmanaged
            {
                t = managed.t,
                r = managed.r,
            };

            unsafe
            {
                if(managed.a != null)
                {
                    if(managed.a.Length != 5)
                    {
                        throw new InvalidOperationException($"The managed array field '{nameof(Weird2u8.a)}' has {managed.a.Length} elements, exceeding the fixed size array of 5.");
                    }
                    var source_a = new ReadOnlySpan<byte>(managed.a, 0, managed.a.Length);
                    var dest = new Span<byte>(result.a, 5);
                    source_a.CopyTo(dest);
                }
                else
                {
                    throw new InvalidOperationException($"The managed field cannot be null.");
                }
            }

            return result;
        }

        public static Weird2u8 ConvertToManaged(Unmanaged unmanaged)
        {
            var result = new Weird2u8()
            {
                t = unmanaged.t,
                r = unmanaged.r,
            };

            unsafe
            {
                var source_a = new Span<byte>(unmanaged.a, 5);
                var arr_a = new byte[5];
                source_a.CopyTo(arr_a.AsSpan());
                result.a = arr_a;
            }

            return result;
        }
    }


    // Debug - write_type_definition_fn_pointer 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate byte InteropDelegate_fn_u8_rval_u8(byte x0);

    // Debug - write_type_definition_fn_pointer 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void InteropDelegate_fn_CharArray(CharArray x0);
    delegate void InteropDelegate_fn_CharArray_native(CharArray x0);

    // Debug - write_type_definition_enum 
    public enum FFIError
    {
        Ok = 0,
        Null = 100,
        Panic = 200,
        Delegate = 300,
        Fail = 400,
    }

    // Debug - write_type_definition_composite 
    ///Option type containing boolean flag and maybe valid data.
    [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public partial struct OptionInner
    {
        ///Element that is maybe valid.
        Inner t;
        ///Byte where `1` means element `t` is valid.
        byte is_some;
    }
    // Debug - write_type_marshaller 

    // Debug - write_pattern_option 
    public partial struct OptionInner
    {
        public static OptionInner FromNullable(Inner? nullable)
        {
            var result = new OptionInner();
            if (nullable.HasValue)
            {
                result.is_some = 1;
                result.t = nullable.Value;
            }

            return result;
        }

        public Inner? ToNullable()
        {
            return this.is_some == 1 ? this.t : (Inner?)null;
        }
    }


    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void CallbackCharArray2Delegate(CharArray value);
    public delegate void CallbackCharArray2Native(CharArray value, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<CallbackCharArray2Native>))]
    public class CallbackCharArray2: CallbackStruct<CallbackCharArray2Native>
    {
        internal readonly CallbackCharArray2Delegate _userCallback;

        public CallbackCharArray2(CallbackCharArray2Delegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public void Call(CharArray value, IntPtr _)
        {
            _userCallback(value);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate byte CallbackFFISliceDelegate(Slice<byte> slice);
    public delegate byte CallbackFFISliceNative(Slice<byte> slice, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<CallbackFFISliceNative>))]
    public class CallbackFFISlice: CallbackStruct<CallbackFFISliceNative>
    {
        internal readonly CallbackFFISliceDelegate _userCallback;

        public CallbackFFISlice(CallbackFFISliceDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public byte Call(Slice<byte> slice, IntPtr _)
        {
            return _userCallback(slice);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate Vec3f32 CallbackHugeVecSliceDelegate(Slice<Vec3f32> slice);
    public delegate Vec3f32 CallbackHugeVecSliceNative(Slice<Vec3f32> slice, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<CallbackHugeVecSliceNative>))]
    public class CallbackHugeVecSlice: CallbackStruct<CallbackHugeVecSliceNative>
    {
        internal readonly CallbackHugeVecSliceDelegate _userCallback;

        public CallbackHugeVecSlice(CallbackHugeVecSliceDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public Vec3f32 Call(Slice<Vec3f32> slice, IntPtr _)
        {
            return _userCallback(slice);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void CallbackSliceMutDelegate(SliceMut<byte> slice);
    public delegate void CallbackSliceMutNative(SliceMut<byte> slice, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<CallbackSliceMutNative>))]
    public class CallbackSliceMut: CallbackStruct<CallbackSliceMutNative>
    {
        internal readonly CallbackSliceMutDelegate _userCallback;

        public CallbackSliceMut(CallbackSliceMutDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public void Call(SliceMut<byte> slice, IntPtr _)
        {
            _userCallback(slice);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate byte CallbackU8Delegate(byte value);
    public delegate byte CallbackU8Native(byte value, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<CallbackU8Native>))]
    public class CallbackU8: CallbackStruct<CallbackU8Native>
    {
        internal readonly CallbackU8Delegate _userCallback;

        public CallbackU8(CallbackU8Delegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public byte Call(byte value, IntPtr _)
        {
            return _userCallback(value);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate uint MyCallbackDelegate(uint value);
    public delegate uint MyCallbackNative(uint value, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<MyCallbackNative>))]
    public class MyCallback: CallbackStruct<MyCallbackNative>
    {
        internal readonly MyCallbackDelegate _userCallback;

        public MyCallback(MyCallbackDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public uint Call(uint value, IntPtr _)
        {
            return _userCallback(value);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void MyCallbackVoidDelegate(IntPtr ptr);
    public delegate void MyCallbackVoidNative(IntPtr ptr, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<MyCallbackVoidNative>))]
    public class MyCallbackVoid: CallbackStruct<MyCallbackVoidNative>
    {
        internal readonly MyCallbackVoidDelegate _userCallback;

        public MyCallbackVoid(MyCallbackVoidDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public void Call(IntPtr ptr, IntPtr _)
        {
            _userCallback(ptr);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void SumDelegate1Delegate();
    public delegate void SumDelegate1Native(IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<SumDelegate1Native>))]
    public class SumDelegate1: CallbackStruct<SumDelegate1Native>
    {
        internal readonly SumDelegate1Delegate _userCallback;

        public SumDelegate1(SumDelegate1Delegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public void Call(, IntPtr _)
        {
            _userCallback();
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate int SumDelegate2Delegate(int x, int y);
    public delegate int SumDelegate2Native(int x, int y, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<SumDelegate2Native>))]
    public class SumDelegate2: CallbackStruct<SumDelegate2Native>
    {
        internal readonly SumDelegate2Delegate _userCallback;

        public SumDelegate2(SumDelegate2Delegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public int Call(int x, int y, IntPtr _)
        {
            return _userCallback(x, y);
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate FFIError SumDelegateReturnDelegate(int x, int y);
    public delegate FFIError SumDelegateReturnNative(int x, int y, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<SumDelegateReturnNative>))]
    public class SumDelegateReturn: CallbackStruct<SumDelegateReturnNative>
    {
        internal readonly SumDelegateReturnDelegate _userCallback;

        public SumDelegateReturn(SumDelegateReturnDelegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public FFIError Call(int x, int y, IntPtr _)
        {
            return _userCallback(x, y);
        }
    }

    // Internal helper that works around an issue where exceptions in callbacks don't reenter Rust.
    public class SumDelegateReturnExceptionSafe {
        private Exception failure = null;
        private readonly SumDelegateReturn _callback;

        public SumDelegateReturnExceptionSafe(SumDelegateReturn original)
        {
            _callback = original;
        }

        public FFIError Call(int x, int y, IntPtr callback_data)
        {
            try
            {
                return _callback(x, y);
            }
            catch (Exception e)
            {
                failure = e;
                return FFIError.Panic;
            }
        }

        public void Rethrow()
        {
            if (this.failure != null)
            {
                throw this.failure;
            }
        }
    }

    // Debug - write_type_definition_named_callback 
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void SumDelegateReturn2Delegate(int x, int y);
    public delegate void SumDelegateReturn2Native(int x, int y, IntPtr callback_data);

    [NativeMarshalling(typeof(CallbackStructMarshaller<SumDelegateReturn2Native>))]
    public class SumDelegateReturn2: CallbackStruct<SumDelegateReturn2Native>
    {
        internal readonly SumDelegateReturn2Delegate _userCallback;

        public SumDelegateReturn2(SumDelegateReturn2Delegate userCallback)
        {
            _userCallback = userCallback;
            Init(Call);
        }

        public void Call(int x, int y, IntPtr _)
        {
            _userCallback(x, y);
        }
    }


    // Debug - write_pattern_service 
    public partial class BasicService : IDisposable
    {
        private IntPtr _context;

        private BasicService() {}

        // Debug - write_pattern_service_method 
        public static BasicService New()
        {
            var self = new BasicService();
            var rval = Interop.basic_service_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.basic_service_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Some struct we want to expose as a class.
    public partial class ServiceOnPanic : IDisposable
    {
        private IntPtr _context;

        private ServiceOnPanic() {}

        // Debug - write_pattern_service_method 
        public static ServiceOnPanic New()
        {
            var self = new ServiceOnPanic();
            var rval = Interop.service_on_panic_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_on_panic_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        /// Methods returning a Result<(), _> are the default and do not
        /// need annotations.
        // Debug - write_pattern_service_method 
        public void ReturnResult(uint anon1)
        {
            var rval = Interop.service_on_panic_return_result(_context, anon1);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        /// Methods returning a value need an `on_panic` annotation.
        // Debug - write_pattern_service_method 
        public uint ReturnDefaultValue(uint x)
        {
            return Interop.service_on_panic_return_default_value(_context, x);
        }

        /// This function has no panic safeguards. It will be a bit faster to
        /// call, but if it panics your host app will be in an undefined state.
        // Debug - write_pattern_service_method 
        public string ReturnUbOnPanic()
        {
            var s = Interop.service_on_panic_return_ub_on_panic(_context);
            return Marshal.PtrToStringAnsi(s);
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Some struct we want to expose as a class.
    public partial class ServiceCallbacks : IDisposable
    {
        private IntPtr _context;

        private ServiceCallbacks() {}

        // Debug - write_pattern_service_method 
        public static ServiceCallbacks New()
        {
            var self = new ServiceCallbacks();
            var rval = Interop.service_callbacks_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_callbacks_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public void CallbackSimple(MyCallback callback)
        {
            var rval = Interop.service_callbacks_callback_simple(_context, callback);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public void CallbackFfiReturn(SumDelegateReturn callback)
        {
            var callback_safe_delegate = new SumDelegateReturnExceptionSafe(callback);
            var rval = Interop.service_callbacks_callback_ffi_return(_context, callback_safe_delegate.Call);
            callback_safe_delegate.Rethrow();
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public void CallbackWithSlice(SumDelegateReturn callback, Slice<int> input)
        {
            var callback_safe_delegate = new SumDelegateReturnExceptionSafe(callback);
            var rval = Interop.service_callbacks_callback_with_slice(_context, callback_safe_delegate.Call, input);
            callback_safe_delegate.Rethrow();
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public void CallbackWithSlice(SumDelegateReturn callback, ReadOnlySpan<int> input)
        {
            Interop.service_callbacks_callback_with_slice(_context, callback, input);
        }

        // Debug - write_pattern_service_method 
        public void InvokeDelegates()
        {
            var rval = Interop.service_callbacks_invoke_delegates(_context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    public partial class ServiceIgnoringMethods : IDisposable
    {
        private IntPtr _context;

        private ServiceIgnoringMethods() {}

        // Debug - write_pattern_service_method 
        public static ServiceIgnoringMethods New()
        {
            var self = new ServiceIgnoringMethods();
            var rval = Interop.service_ignoring_methods_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_ignoring_methods_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Some struct we want to expose as a class.
    public partial class ServiceMultipleCtors : IDisposable
    {
        private IntPtr _context;

        private ServiceMultipleCtors() {}

        // Debug - write_pattern_service_method 
        public static ServiceMultipleCtors NewWith(uint some_value)
        {
            var self = new ServiceMultipleCtors();
            var rval = Interop.service_multiple_ctors_new_with(ref self._context, some_value);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public static ServiceMultipleCtors NewWithout()
        {
            var self = new ServiceMultipleCtors();
            var rval = Interop.service_multiple_ctors_new_without(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public static ServiceMultipleCtors NewWithString([MarshalAs(UnmanagedType.LPStr)] string anon0)
        {
            var self = new ServiceMultipleCtors();
            var rval = Interop.service_multiple_ctors_new_with_string(ref self._context, anon0);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public static ServiceMultipleCtors NewFailing(byte some_value)
        {
            var self = new ServiceMultipleCtors();
            var rval = Interop.service_multiple_ctors_new_failing(ref self._context, some_value);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_multiple_ctors_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Services can use lifetimes. However, they are more dangerous to use
    /// via FFI, since you will not get any help tracking lifetimes there.
    public partial class ServiceUsingLifetimes : IDisposable
    {
        private IntPtr _context;

        private ServiceUsingLifetimes() {}

        // Debug - write_pattern_service_method 
        public static ServiceUsingLifetimes NewWith(ref uint some_value)
        {
            var self = new ServiceUsingLifetimes();
            var rval = Interop.service_using_lifetimes_new_with(ref self._context, ref some_value);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_using_lifetimes_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public void Lifetime1(Slice<Bool> slice)
        {
            Interop.service_using_lifetimes_lifetime_1(_context, slice);
        }

        public void Lifetime1(ReadOnlySpan<Bool> slice)
        {
            Interop.service_using_lifetimes_lifetime_1(_context, slice);
        }

        // Debug - write_pattern_service_method 
        public void Lifetime2(Slice<Bool> slice)
        {
            Interop.service_using_lifetimes_lifetime_2(_context, slice);
        }

        public void Lifetime2(ReadOnlySpan<Bool> slice)
        {
            Interop.service_using_lifetimes_lifetime_2(_context, slice);
        }

        // Debug - write_pattern_service_method 
        public string ReturnStringAcceptSlice(Slice<byte> anon1)
        {
            var s = Interop.service_using_lifetimes_return_string_accept_slice(_context, anon1);
            return Marshal.PtrToStringAnsi(s);
        }

        public string ReturnStringAcceptSlice(ReadOnlySpan<byte> anon1)
        {
            return Interop.service_using_lifetimes_return_string_accept_slice(_context, anon1);
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Some struct we want to expose as a class.
    public partial class ServiceVariousSlices : IDisposable
    {
        private IntPtr _context;

        private ServiceVariousSlices() {}

        // Debug - write_pattern_service_method 
        public static ServiceVariousSlices New()
        {
            var self = new ServiceVariousSlices();
            var rval = Interop.service_various_slices_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_various_slices_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public byte MutSelf(Slice<byte> slice)
        {
            return Interop.service_various_slices_mut_self(_context, slice);
        }

        public byte MutSelf(ReadOnlySpan<byte> slice)
        {
            return Interop.service_various_slices_mut_self(_context, slice);
        }

        /// Single line.
        // Debug - write_pattern_service_method 
        public void MutSelfVoid(Slice<Bool> slice)
        {
            Interop.service_various_slices_mut_self_void(_context, slice);
        }

        /// Single line.
        public void MutSelfVoid(ReadOnlySpan<Bool> slice)
        {
            Interop.service_various_slices_mut_self_void(_context, slice);
        }

        // Debug - write_pattern_service_method 
        public byte MutSelfRef(ref byte x, out byte y)
        {
            return Interop.service_various_slices_mut_self_ref(_context, ref x, out y);
        }

        // Debug - write_pattern_service_method 
        public byte MutSelfRefSlice(ref byte x, out byte y, Slice<byte> slice)
        {
            return Interop.service_various_slices_mut_self_ref_slice(_context, ref x, out y, slice);
        }

        public byte MutSelfRefSlice(ref byte x, out byte y, ReadOnlySpan<byte> slice)
        {
            return Interop.service_various_slices_mut_self_ref_slice(_context, ref x, out y, slice);
        }

        // Debug - write_pattern_service_method 
        public byte MutSelfRefSliceLimited(ref byte x, out byte y, Slice<byte> slice, Slice<byte> slice2)
        {
            return Interop.service_various_slices_mut_self_ref_slice_limited(_context, ref x, out y, slice, slice2);
        }

        public byte MutSelfRefSliceLimited(ref byte x, out byte y, ReadOnlySpan<byte> slice, ReadOnlySpan<byte> slice2)
        {
            return Interop.service_various_slices_mut_self_ref_slice_limited(_context, ref x, out y, slice, slice2);
        }

        // Debug - write_pattern_service_method 
        public void MutSelfFfiError(SliceMut<byte> slice)
        {
            var rval = Interop.service_various_slices_mut_self_ffi_error(_context, slice);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public void MutSelfFfiError(Span<byte> slice)
        {
            Interop.service_various_slices_mut_self_ffi_error(_context, slice);
        }

        // Debug - write_pattern_service_method 
        public void MutSelfNoError(SliceMut<byte> slice)
        {
            var rval = Interop.service_various_slices_mut_self_no_error(_context, slice);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        public void MutSelfNoError(Span<byte> slice)
        {
            Interop.service_various_slices_mut_self_no_error(_context, slice);
        }

        /// Warning, you _must_ discard the returned slice object before calling into this service
        /// again, as otherwise undefined behavior might happen.
        // Debug - write_pattern_service_method 
        public Slice<uint> ReturnSlice()
        {
            return Interop.service_various_slices_return_slice(_context);
        }

        /// Warning, you _must_ discard the returned slice object before calling into this service
        /// again, as otherwise undefined behavior might happen.
        // Debug - write_pattern_service_method 
        public SliceMut<uint> ReturnSliceMut()
        {
            return Interop.service_various_slices_return_slice_mut(_context);
        }

        public IntPtr Context => _context;
    }


    // Debug - write_pattern_service 
    /// Some struct we want to expose as a class.
    public partial class ServiceStrings : IDisposable
    {
        private IntPtr _context;

        private ServiceStrings() {}

        // Debug - write_pattern_service_method 
        public static ServiceStrings New()
        {
            var self = new ServiceStrings();
            var rval = Interop.service_strings_new(ref self._context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
            return self;
        }

        // Debug - write_pattern_service_method 
        public void Dispose()
        {
            var rval = Interop.service_strings_destroy(ref _context);
            if (rval != FFIError.Ok)
            {
                throw new InteropException<FFIError>(rval);
            }
        }

        // Debug - write_pattern_service_method 
        public void PassString([MarshalAs(UnmanagedType.LPStr)] string anon1)
        {
            Interop.service_strings_pass_string(_context, anon1);
        }

        // Debug - write_pattern_service_method 
        public string ReturnString()
        {
            var s = Interop.service_strings_return_string(_context);
            return Marshal.PtrToStringAnsi(s);
        }

        public IntPtr Context => _context;
    }



}
